<div id="topbar-wrapper" class="topbar-wrapper">
  <div class="topbar-inner">
    <nav class="topbar-breadcrumb" aria-label="面包屑导航">
      <a href="{{ site.baseurl }}/" class="breadcrumb-link">首页</a>
      {% assign breadcrumb_separator = '<span class="breadcrumb-sep">/</span>' %}

      {% if page.categories and page.categories.size > 0 %}
        {% for category in page.categories %}
          {{ breadcrumb_separator }}
          <a class="breadcrumb-link" href="{{ site.baseurl }}/categories/#{{ category | slugify }}">{{ category }}</a>
        {% endfor %}
      {% elsif page.layout == 'post' %}
        {{ breadcrumb_separator }}
        <span class="breadcrumb-link">博文</span>
      {% endif %}

      {% if page.title %}
        {{ breadcrumb_separator }}
        <span class="breadcrumb-current">{{ page.title }}</span>
      {% endif %}
    </nav>

    <div class="topbar-search" role="search">
      <label for="topbar-search-input" class="sr-only">搜索博文</label>
      <input type="search"
             id="topbar-search-input"
             class="topbar-search-input"
             placeholder="搜索博文..."
             autocomplete="off" />
      <div id="topbar-search-results" class="topbar-search-results" aria-live="polite"></div>
    </div>
  </div>
</div>

<script>
  window.topbarPosts = [
    {% for post in site.posts %}
      {
        title: {{ post.title | jsonify }},
        url: {{ post.url | prepend: site.baseurl | jsonify }},
        date: {{ post.date | date: "%Y-%m-%d" | jsonify }},
        categories: {{ post.categories | default: empty | jsonify }}
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
</script>

